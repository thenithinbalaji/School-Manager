{% extends 'base.html' %}
{% block main %}

<body>

    <script>
        function schoolsearch() {
            searchbox = document.getElementById("simple-search")
            id = searchbox.value

            window.location = window.location + "/school/" + id

            searchbox.value = null
        }

        function studentsearch() {
            searchbox = document.getElementById("complex-search")
            id = searchbox.value

            window.location = window.location + "/student/" + id

            searchbox.value = null
        }
    </script>


    <header class="w-full">

        <nav class="bg-white border-gray-200 py-2.5">

            <div class="flex flex-wrap items-center justify-between max-w-screen-xl px-4 mx-auto">

                <div class="flex gap-3">
                    <a href="/admin" class="flex items-center">
                        <img src="{{ url_for('static', filename='assets/logo.svg') }}" class="h-6 mr-3 sm:h-9"
                            alt="Poshan Logo" />
                        <span class="self-center text-xl font-semibold whitespace-nowrap">Poshan</span>
                    </a>

                    <img src="{{ url_for('static', filename='assets/g20.png') }}" class="h-6 sm:h-9" alt="G20 Logo" />

                    <img src="{{ url_for('static', filename='assets/poshan.png')}}" class="h-6 sm:h-9" alt="Gov Logo" />
                </div>

                <a href="/logout"
                    class="text-white bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-4 lg:px-5 py-2 lg:py-2.5 sm:mr-2 lg:mr-0 focus:outline-none ">
                    Logout
                </a>
            </div>

        </nav>

    </header>

    <div class="flex justify-center">
        <div class="mt-5 w-1/2">
            {% with messages = get_flashed_messages() %}
            {% if messages %}
            {% for message in messages %}
            {% if message == 'ischool' %}
            <div style="background-color: rgb(122, 189, 255); text-align:center; padding:10px; border-radius:10px;">
                Invalid School ID, please try again
            </div>
            {% endif %}

            {% if message == 'istudent' %}
            <div style="background-color: rgb(122, 189, 255); text-align:center; padding:10px; border-radius:10px;">
                Invalid Student ID, please try again
            </div>
            {% endif%}

            {% endfor %}
            {% endif %}
            {% endwith %}
        </div>
    </div>
    <form class="flex items-center justify-center mt-6" onsubmit="event.preventDefault();">

        <label for="simple-search" class="sr-only">Search</label>
        <div class="relative w-3/4">
            <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                <svg aria-hidden="true" class="w-5 h-5 text-gray-500 remove:text-gray-400" fill="currentColor"
                    viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd"
                        d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                        clip-rule="evenodd"></path>
                </svg>
            </div>
            <input type="number" id="simple-search"
                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5  remove:bg-gray-700 remove:border-gray-600 remove:placeholder-gray-400 remove:text-white remove:focus:ring-blue-500 remove:focus:border-blue-500"
                placeholder="Search School using Poshan ID" required min="1">
        </div>

        <div onclick="schoolsearch()" id="searchbtn"
            class="p-2.5 ml-2 text-sm font-medium text-white bg-blue-700 rounded-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 remove:bg-blue-600 remove:hover:bg-blue-700 remove:focus:ring-blue-800">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
            <span class="sr-only">Search</span>
        </div>

    </form>

    <form class="flex items-center justify-center mt-6" onsubmit="event.preventDefault();">

        <label for="complex-search" class="sr-only">Search</label>
        <div class="relative w-3/4">
            <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                <svg aria-hidden="true" class="w-5 h-5 text-gray-500 remove:text-gray-400" fill="currentColor"
                    viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd"
                        d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                        clip-rule="evenodd"></path>
                </svg>
            </div>
            <input type="number" id="complex-search"
                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5  remove:bg-gray-700 remove:border-gray-600 remove:placeholder-gray-400 remove:text-white remove:focus:ring-blue-500 remove:focus:border-blue-500"
                placeholder="Search Student using Poshan ID" required min="1">
        </div>

        <div onclick="studentsearch()" id="searchbtn"
            class="p-2.5 ml-2 text-sm font-medium text-white bg-blue-700 rounded-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 remove:bg-blue-600 remove:hover:bg-blue-700 remove:focus:ring-blue-800">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
            <span class="sr-only">Search</span>
        </div>

    </form>

    <div class="w-full flex justify-center">
        <div class="w-fit justify-center mt-8 drop-shadow-lg sm:grid sm:grid-cols-2 md:grid-cols-3">
            <div class="bg-gray-100 rounded-md p-4 w-fit m-10 hover:scale-[1.1]">
                <div class="text-lg font-medium text-gray-600">Number of Schools</div>
                <div class="text-3xl font-bold text-gray-900">{{data["schoolcount"]}}</div>
            </div>

            <div class="bg-gray-100 rounded-md p-4 w-fit m-10 hover:scale-[1.1]">
                <div class="text-lg font-medium text-gray-600">Number of Students</div>
                <div class="text-3xl font-bold text-gray-900">{{data["studentcount"]}}</div>
            </div>

            <div class="bg-gray-100 rounded-md p-4 w-fit m-10 hover:scale-[1.1]">
                <div class="text-lg font-medium text-gray-600">Average BMI</div>
                <div class="text-3xl font-bold text-gray-900">{{data["avgbmi"]}}</div>
            </div>

            <div class="bg-gray-100 rounded-md p-4 w-fit m-10 hover:scale-[1.1]">
                <div class="text-lg font-medium text-gray-600">Average Height (in cms)</div>
                <div class="text-3xl font-bold text-gray-900">{{data["avght"]}}</div>
            </div>

            <div class="bg-gray-100 rounded-md p-4 w-fit m-10 hover:scale-[1.1]">
                <div class="text-lg font-medium text-gray-600">Average Weight (in kgs)</div>
                <div class="text-3xl font-bold text-gray-900">{{data["avgwt"]}}</div>
            </div>

            <div class="bg-gray-100 rounded-md p-4 w-fit m-10 hover:scale-[1.1]">
                <div class="text-lg font-medium text-gray-600">BMI Under Weight Count</div>
                <div class="text-3xl font-bold text-gray-900">{{data["uw"]}}</div>
            </div>

            <div class="bg-gray-100 rounded-md p-4 w-fit m-10 hover:scale-[1.1]">
                <div class="text-lg font-medium text-gray-600">BMI Normal Weight Count</div>
                <div class="text-3xl font-bold text-gray-900">{{data["nw"]}}</div>
            </div>

            <div class="bg-gray-100 rounded-md p-4 w-fit m-10 hover:scale-[1.1]">
                <div class="text-lg font-medium text-gray-600">BMI Over Weight Count</div>
                <div class="text-3xl font-bold text-gray-900">{{data["ow"]}}</div>
            </div>

            <div class="bg-gray-100 rounded-md p-4 w-fit m-10 hover:scale-[1.1]">
                <div class="text-lg font-medium text-gray-600">BMI Obese Count</div>
                <div class="text-3xl font-bold text-gray-900">{{data["obs"]}}</div>
            </div>
        </div>
    </div>


    <footer class="bg-white remove:bg-gray-800 pb-10">
        <div class="max-w-screen-xl p-4 py-6 mx-auto lg:py-5 md:p-8 lg:p-10">

            <hr class="my-6 border-gray-200 sm:mx-auto lg:my-8">
            <div class="text-center">

                <img src="{{ url_for('static', filename='assets/logo_row.png') }}" alt="All Logos" />

                <span class="block text-sm text-center text-gray-500">Â© 2023-2024 Poshan. All
                    Rights Reserved. Built with Love and Coffee
                </span>

            </div>
        </div>
    </footer>

</body>

{% endblock %}